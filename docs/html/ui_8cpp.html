<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RT1 - Final Assignment: src/ui.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RT1 - Final Assignment
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">ROS package for controlling a mobile robot in a simulated environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ui.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>User interface controller of the robot.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &quot;actionlib_msgs/GoalID.h&quot;</code><br />
<code>#include &quot;move_base_msgs/MoveBaseActionGoal.h&quot;</code><br />
<code>#include &quot;move_base_msgs/MoveBaseActionFeedback.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ui.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="ui_8cpp__incl.png" border="0" usemap="#src_2ui_8cpp" alt=""/></div>
<map name="src_2ui_8cpp" id="src_2ui_8cpp">
<area shape="rect" title="User interface controller of the robot." alt="" coords="274,5,358,32"/>
<area shape="rect" title=" " alt="" coords="5,87,85,114"/>
<area shape="rect" title=" " alt="" coords="109,87,176,114"/>
<area shape="rect" title=" " alt="" coords="201,87,279,114"/>
<area shape="rect" title=" " alt="" coords="303,87,483,114"/>
<area shape="rect" title=" " alt="" coords="507,80,759,121"/>
<area shape="rect" title=" " alt="" coords="783,80,1035,121"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a45ba202b05caf39795aeca91b0ae547e"><td class="memItemLeft" align="right" valign="top"><a id="a45ba202b05caf39795aeca91b0ae547e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a45ba202b05caf39795aeca91b0ae547e">TIMEOUT</a>&#160;&#160;&#160;120</td></tr>
<tr class="memdesc:a45ba202b05caf39795aeca91b0ae547e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout = 2minutes (goal cancelled after timeout) <br  />
 <br /></td></tr>
<tr class="separator:a45ba202b05caf39795aeca91b0ae547e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a166ff10178716638dad268b1ddab8242"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a166ff10178716638dad268b1ddab8242">inputCommand</a> ()</td></tr>
<tr class="memdesc:a166ff10178716638dad268b1ddab8242"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main menu to input commands.  <a href="ui_8cpp.html#a166ff10178716638dad268b1ddab8242">More...</a><br /></td></tr>
<tr class="separator:a166ff10178716638dad268b1ddab8242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac44135482fcab66ae9b51aa8e4e6cb95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#ac44135482fcab66ae9b51aa8e4e6cb95">inputGoal</a> ()</td></tr>
<tr class="memdesc:ac44135482fcab66ae9b51aa8e4e6cb95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to input the goal coordinates.  <a href="ui_8cpp.html#ac44135482fcab66ae9b51aa8e4e6cb95">More...</a><br /></td></tr>
<tr class="separator:ac44135482fcab66ae9b51aa8e4e6cb95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa098f199ee60423fd257562757fa6ed8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#aa098f199ee60423fd257562757fa6ed8">checkGoalStatus</a> (const move_base_msgs::MoveBaseActionFeedback::ConstPtr &amp;feedbackMsg)</td></tr>
<tr class="memdesc:aa098f199ee60423fd257562757fa6ed8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function of /move_base/feedback.  <a href="ui_8cpp.html#aa098f199ee60423fd257562757fa6ed8">More...</a><br /></td></tr>
<tr class="separator:aa098f199ee60423fd257562757fa6ed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6911e3fbd406f287be9ab539f0459c0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a6911e3fbd406f287be9ab539f0459c0a">cancelGoal</a> ()</td></tr>
<tr class="memdesc:a6911e3fbd406f287be9ab539f0459c0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to cancel the goal.  <a href="ui_8cpp.html#a6911e3fbd406f287be9ab539f0459c0a">More...</a><br /></td></tr>
<tr class="separator:a6911e3fbd406f287be9ab539f0459c0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function of the UI node.  <a href="ui_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae057aae7fbba2a4cef62321020305295"><td class="memItemLeft" align="right" valign="top"><a id="ae057aae7fbba2a4cef62321020305295"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#ae057aae7fbba2a4cef62321020305295">pub_goal</a></td></tr>
<tr class="memdesc:ae057aae7fbba2a4cef62321020305295"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publisher to send the goal. <br /></td></tr>
<tr class="separator:ae057aae7fbba2a4cef62321020305295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33cbe548b1e0f6b08bbe754f53af458c"><td class="memItemLeft" align="right" valign="top"><a id="a33cbe548b1e0f6b08bbe754f53af458c"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a33cbe548b1e0f6b08bbe754f53af458c">pub_cancel</a></td></tr>
<tr class="memdesc:a33cbe548b1e0f6b08bbe754f53af458c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publisher to cancel the goal. <br /></td></tr>
<tr class="separator:a33cbe548b1e0f6b08bbe754f53af458c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc2407a897aa2b5d1d9d65f6728027dd"><td class="memItemLeft" align="right" valign="top"><a id="abc2407a897aa2b5d1d9d65f6728027dd"></a>
actionlib_msgs::GoalID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#abc2407a897aa2b5d1d9d65f6728027dd">canc_goal</a></td></tr>
<tr class="memdesc:abc2407a897aa2b5d1d9d65f6728027dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Action message to cancel the goal. <br /></td></tr>
<tr class="separator:abc2407a897aa2b5d1d9d65f6728027dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1292e042df88fd7461a4dc998912f6d1"><td class="memItemLeft" align="right" valign="top"><a id="a1292e042df88fd7461a4dc998912f6d1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a1292e042df88fd7461a4dc998912f6d1">goal</a> = false</td></tr>
<tr class="memdesc:a1292e042df88fd7461a4dc998912f6d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boolean defining if there is a goal active. <br /></td></tr>
<tr class="separator:a1292e042df88fd7461a4dc998912f6d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fc1f09b9abf6843e19b643f448bef53"><td class="memItemLeft" align="right" valign="top"><a id="a0fc1f09b9abf6843e19b643f448bef53"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a0fc1f09b9abf6843e19b643f448bef53">shutdown</a> = false</td></tr>
<tr class="memdesc:a0fc1f09b9abf6843e19b643f448bef53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Boolean defining if user wants to exit. <br /></td></tr>
<tr class="separator:a0fc1f09b9abf6843e19b643f448bef53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a829831b69f522e8f5ae5dcdc28158d3e"><td class="memItemLeft" align="right" valign="top"><a id="a829831b69f522e8f5ae5dcdc28158d3e"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a829831b69f522e8f5ae5dcdc28158d3e">x_goal</a></td></tr>
<tr class="memdesc:a829831b69f522e8f5ae5dcdc28158d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinate X of the goal. <br  />
 <br /></td></tr>
<tr class="separator:a829831b69f522e8f5ae5dcdc28158d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20e8d23393e688fc52779c872bdc1e45"><td class="memItemLeft" align="right" valign="top"><a id="a20e8d23393e688fc52779c872bdc1e45"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a20e8d23393e688fc52779c872bdc1e45">y_goal</a></td></tr>
<tr class="memdesc:a20e8d23393e688fc52779c872bdc1e45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinate Y of the goal. <br  />
 <br /></td></tr>
<tr class="separator:a20e8d23393e688fc52779c872bdc1e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d2f977aec638fff47fff3c61b88ad5"><td class="memItemLeft" align="right" valign="top"><a id="ad8d2f977aec638fff47fff3c61b88ad5"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#ad8d2f977aec638fff47fff3c61b88ad5">id_goal</a></td></tr>
<tr class="memdesc:ad8d2f977aec638fff47fff3c61b88ad5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Goal ID. <br /></td></tr>
<tr class="separator:ad8d2f977aec638fff47fff3c61b88ad5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f587a0eb512cde589958649fbe0be71"><td class="memItemLeft" align="right" valign="top"><a id="a6f587a0eb512cde589958649fbe0be71"></a>
std::chrono::high_resolution_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a6f587a0eb512cde589958649fbe0be71">start</a></td></tr>
<tr class="memdesc:a6f587a0eb512cde589958649fbe0be71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starting time of goal reaching. <br /></td></tr>
<tr class="separator:a6f587a0eb512cde589958649fbe0be71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d374bbc631bb15a8f3b7f5208c921b"><td class="memItemLeft" align="right" valign="top"><a id="af1d374bbc631bb15a8f3b7f5208c921b"></a>
std::chrono::high_resolution_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#af1d374bbc631bb15a8f3b7f5208c921b">end</a></td></tr>
<tr class="memdesc:af1d374bbc631bb15a8f3b7f5208c921b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ending time of goal reaching. <br /></td></tr>
<tr class="separator:af1d374bbc631bb15a8f3b7f5208c921b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a993dee0d19091c6d48fdeda230fd6be0"><td class="memItemLeft" align="right" valign="top"><a id="a993dee0d19091c6d48fdeda230fd6be0"></a>
long int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ui_8cpp.html#a993dee0d19091c6d48fdeda230fd6be0">duration</a></td></tr>
<tr class="memdesc:a993dee0d19091c6d48fdeda230fd6be0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duration time of goal reaching. <br /></td></tr>
<tr class="separator:a993dee0d19091c6d48fdeda230fd6be0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>User interface controller of the robot. </p>
<dl class="section author"><dt>Author</dt><dd>Mohammad Al Horany </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>10/04/2022</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">assistant</td><td>Defines if the collision avoidance is on.</td></tr>
  </table>
  </dd>
</dl>
<p>Subscribes to: <br  />
</p><ul>
<li>/move_base/feedback It contains the feedback of the move_base action</li>
</ul>
<p>Publishes to: <br  />
</p><ul>
<li>/move_base/goal It permits to set a goal via move_base action</li>
<li>/move_base/cancel It permits to cancel a goal via move_base action</li>
</ul>
<p>Description : <br  />
</p>
<p>This is the main node of the program. It provides a main menu to the user, who can choose the modality among the three mentioned. It is executed by the launch file and it is always active. It also implements the automatic mode (reach the goal autonomously), by simply taking the goal coordinate from the user and publishing it in move_base/goal topic. It receives feedback and it checks the status from the action. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6911e3fbd406f287be9ab539f0459c0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6911e3fbd406f287be9ab539f0459c0a">&#9670;&nbsp;</a></span>cancelGoal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cancelGoal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to cancel the goal. </p>
<p>This function is called to cancel a goal, by publishing a message with the goal ID in '/move_base/cancel'. </p>

</div>
</div>
<a id="aa098f199ee60423fd257562757fa6ed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa098f199ee60423fd257562757fa6ed8">&#9670;&nbsp;</a></span>checkGoalStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkGoalStatus </td>
          <td>(</td>
          <td class="paramtype">const move_base_msgs::MoveBaseActionFeedback::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>feedbackMsg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function of /move_base/feedback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">feedbackMsg</td><td>Action move_base feedback.</td></tr>
  </table>
  </dd>
</dl>
<p>This function updates the goal ID and checks if the goal has been reached or it cannot be reached, displaying a message in those cases. If the timeout has been exceeded, it cancels the goal. </p>

</div>
</div>
<a id="a166ff10178716638dad268b1ddab8242"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a166ff10178716638dad268b1ddab8242">&#9670;&nbsp;</a></span>inputCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inputCommand </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main menu to input commands. </p>
<p>This function displays the main menu and takes commands from the user to choose the modality or to quit the program. When in autonomously driving mode, it provides a command to cancel the goal. </p>

</div>
</div>
<a id="ac44135482fcab66ae9b51aa8e4e6cb95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac44135482fcab66ae9b51aa8e4e6cb95">&#9670;&nbsp;</a></span>inputGoal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inputGoal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to input the goal coordinates. </p>
<p>This function is called when the user choose autonomously driving mode. It takes the goal coordinates from him and starts the action, changing the state of the robot and starting the timer. </p>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function of the UI node. </p>
<p>This is the main function of the user interface node. It initializes the node, defines publishers (to set and cancel a goal) and a subscriber (to get the action feedback). After that, it repeatdly calls the 'inputCommand' function until user wants to exit, so that it shutdown the node. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
